@using Microsoft.AspNetCore.Localization
@using Microsoft.AspNetCore.Http.Features
@using Microsoft.AspNetCore.Mvc.Localization
@using Microsoft.Extensions.Options
@using Ecommerce.WebUI.Resources

@inject IOptions<RequestLocalizationOptions> _locOptions;
@inject IHtmlLocalizer<AppResource> _localize;

@{
    var requestCulture = Context.Features.Get<IRequestCultureFeature>();
    var cultureItems = _locOptions.Value.SupportedUICultures
       .Select(c => new SelectListItem
       {
           Value = c.Name,
           Text = c.DisplayName
       }).ToList();
    cultureItems.Insert(0, new SelectListItem
    {
        Value = "",
        Text = "-- Select a language --",
    });
}
}

<form asp-controller="Culture" asp-action="SetLanguage" asp-route-returnUrl="@Context.Request.Path" method="post">
    <select name="culture" asp-items="cultureItems" class="form-select form-select-sm" onchange="this.form.submit()">
    </select>
</form>
